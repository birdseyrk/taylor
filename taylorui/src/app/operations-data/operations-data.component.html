

<p-panel [ngStyle]="{background:myReport.yearTypeBackground}" header="{{myReport.reportHeader}} - Operations Data">
       
    <p-button id="manual-load"  label="Load Data"           icon="pi pi-external-link"                                                                          [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showDataDialog()"></p-button>
    <p-button id="file"         label="File Import"         icon="pi pi-file-o"                                                                                 [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showImportFileDialog()"></p-button>
    <p-button id="edit"         label="edit"                icon="pi pi-user-edit"                                  [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showEditDialog()"></p-button>
    <p-button id="chart"        label="Elevation Graph"     icon="pi pi-chart-line"                                 [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showElevationDialog()"></p-button>
    <p-button id="calendar"     label="Calendar"            icon="pi pi-calendar"                                                                               [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showCalendarDialog()"></p-button>
    
    <p-button id="links"         label="Links"              icon="pi pi-link"                                                                                   [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="linksVisible = !linksVisible"></p-button>
    
    <p-button id="save"         label="Save"                icon="pi pi-save"                                       [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showSaveDataDialog()"></p-button>
    
    <p-button id="clear"        label="Clear Data"          icon="pi pi-times-circle"   [style]="{'float':'right'}" [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="danger" [outlined]="true" (click)="showClearOperationalDataDialog()"></p-button>
    <p-button id="help"         label="Help"                icon="pi pi-briefcase"      [style]="{'float':'right'}"                                             [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="openPDF('./assets/help/Load-Data.pdf')"></p-button>
    <p-button id="stipulation"  label="Amended Stipulation" icon="pi pi-briefcase"      [style]="{'float':'right'}"                                             [text]="true" [rounded]="true" severity="success"   [outlined]="true" (click)="openPDF('./assets/help/Amended-Stipulation.pdf')"></p-button>

    <p-divider></p-divider>

        <span >{{myReport.eomContentLabel}}</span>
        <span ><b>   April-July inflow  </b></span>
        <span [ngStyle]="{background:myReport.yearTypeBackground}"><b>{{myReport.yearTypeInflow}}</b></span>
        <span [ngStyle]="{background:myReport.yearTypeBackground}"><b>{{myReport.yearTypeLabel}}</b></span>
        
    <p-table [scrollable]="true" scrollHeight="900px" [styleClass]="selectedSize" [value]="myReport.monthly" [tableStyle]="{ 'min-width': '120rem' }" [autoLayout]="true"  *ngIf="!editDialogVisible">
            <ng-template pTemplate="header">
            <tr padding="3px">
                <th width="15px" class="text-left">Month-a</th>
                <th width="5px"  class="text-center">Days</th>
                <th width="10px"  class="text-center">Manual<br>Inflow<br>(AF)</th>
                <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF)</th>
                <th width="5px"  class="text-center">Inflow<br>(CF)</th>
                <th width="5px"  class="text-center">Manual<br>Outflow<br>(AF)</th>
                <th width="5px"  class="text-center">Outflow<br>(AF)</th>
                <th width="5px"  class="text-center">Outflow<br>(CF)</th>
                <th width="5px"  class="text-center">Average<br>Inflow<br>(CFS)</th>
                <th width="5px"  class="text-center">Average<br>Outflow<br>(CFS)</th>
                <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th>
                <th width="5px"  class="text-center">Elevation<br>Change<br>(FT)</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-myData >  
               
                <tr padding="3px">
                                        
                    <td width="15px" class="text-left p-inputtext-sm">{{ myData.month + ' ' +  myData.dateRange }}</td>  
                    <td width="5px"  class="text-center"  >{{myData.days}}</td>  
                    <td width="5px"  class="text-center p-inputtext-sm" [ngStyle]="{'font-weight': 'bold', 'color':myData.manualInflowTextColor}" *ngIf="myData.manualInflow">{{convertStringToNumber(myData.manualInflow).toFixed(2)}}</td>
                    <td width="5px"  class="text-center p-inputtext-sm" [ngStyle]="{'color':myData.manualInflowTextColor}" *ngIf="!myData.manualInflow"></td>
                    
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.inflow.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.inflowCF.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm" [ngStyle]="{'font-weight': 'bold', 'color':myData.manualOutflowTextColor}" *ngIf="myData.manualOutflow">{{convertStringToNumber(myData.manualOutflow).toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm" [ngStyle]="{'color':myData.manualOutflowTextColor}" *ngIf="!myData.manualOutflow"></td>
                    
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.outflow.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.outflowCF.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.avgInflowCFS.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.avgOutflowCFS.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm">{{myData.eomContent.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm"  [ngStyle]="{'background':myData.elevationWarning}" >{{myData.eomElevation.toFixed(2)}}</td>
                    <td width="5px" class="text-center p-inputtext-sm"[ngClass]="
                    { 'neutral' :(( myData.elevationChange < -0.0000) 
                    &&   (myData.elevationChange  > -0.0000) ),      
                    'outflowincrease' :( myData.elevationChange ) < -0.00001,  
                    'outflowdecrease': ( myData.elevationChange ) >= 0.00001}">{{ myData.elevationChange.toFixed(2) }}</td>
                </tr>
            </ng-template>
    </p-table>

    
        <div class="" *ngIf="editDialogVisible && !dailyDialogVisible">

            <div class="flex flex-shrink-0 ">
                <div class="card flex col-5 justify-content-left border-200 border-1 p-1 border-round">
                    <div class="flex flex-wrap gap-3">
                        <div class="flex align-items-center">
                            <p-radioButton 
                                class="pl-2"
                                name="outflowPercent" 
                                value="Decrease" 
                                [(ngModel)]="outflowDirection" 
                                inputId="outflowPercent1"
                                (onClick)="onPercentageChange(editMonthlyData)"/>
                            <label for="outflowPercent1" class="font-bold ml-1">
                                Decrease %
                            </label>
                            
                            <p-radioButton 
                                class="pl-2"
                                name="outflowPercent" 
                                value="Increase" 
                                [(ngModel)]="outflowDirection" 
                                inputId="outflowPercent2"
                                (onClick)="onPercentageChange(editMonthlyData)"/>
                            <label for="outflowPercent2" class="font-bold ml-1">
                                Increase %
                            </label>
                        </div>
                        
                        <p-checkbox (onChange)="override(editMonthlyData)" [(ngModel)]="overRideChecked" [binary]="true"   label="Override" inputId="binary" />
                        <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">
                                
                                <p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm mb-3 w-0 font-bold" [maxFractionDigits]="4"  inputId="outflowPercentage" (onBlur)="onPercentageChange(editMonthlyData)"  mode="decimal" [size]="4" [min]="0" [max]="100"  [(ngModel)]="outflowPercentage" placeholder="Outflow %" suffix=" %"> </p-inputNumber>
                                <p-slider [(ngModel)]="outflowPercentage" class="mb-3 w-0" (onChange)="onPercentageChange(editMonthlyData)" styleClass="w-30rem" />
                       
                        </div>
                    </div>
                </div>
                    
            <div class="col">
                
                <div class="flex justify-content-end  p-1 border-round-sm ">
                    <div class="flex justify-content-end  p-5 border-round-sm ">
                        <p-button id="month"        label="Daily"               icon="pi pi-calendar-plus"   [style]="{'float':'left'}"        [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="showDailyDialog()"></p-button>
                        <p-button id="refresh"      label="Clear Manual Inputs" icon="pi pi-refresh"     [style]="{'float':'right'}" [disabled]="myReport.reportId.length === 0" [text]="true" [rounded]="true" severity="danger" [outlined]="true" (click)="clearManualEditInputs(editMonthlyData)"></p-button>
                        <p-button id="help"         label="Help"                icon="pi pi-briefcase"      [style]="{'float':'right'}"                                   [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="editHelpSidebarVisible=true"></p-button>
                    </div>
                </div>
            </div>
            </div>

            <p-divider></p-divider>

            <p-table [scrollable]="true" scrollHeight="500px" [styleClass]="selectedSize" [value]="editMonthlyData" [tableStyle]="{ 'min-width': '100rem' }" [autoLayout]="true">
                <ng-template pTemplate="header">
                    <tr padding="3px">
                        <th width="15px" class="text-center">Month-b</th>
                        <th width="5px"  class="text-center">Days</th>
                        <th width="10px"  class="text-center">Manual<br>Inflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Manual<br>Outflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Average<br>Inflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Average<br>Outflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Manual<br>Outflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Change<br>Outflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                        <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th>
                        <th width="5px"  class="text-center">Elevation<br>Change<br>(FT)</th>
                        
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-myData >  
                       
                        <tr padding="3px">
                                                
                            <td width="15px" class="p-inputtext-sm">{{ myData.month + ' ' +  myData.dateRange }}</td>  
                            <td width="5px"  class="text-center"  >{{ myData.days}}</td>
                            <td width="8px"  class="text-center p-inputtext-sm"><p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm" (onBlur)="adjustManualInput(editMonthlyData,myData.index, true)"     inputId="manualInflow_{{myData.index}}"     mode="decimal" [maxFractionDigits]="3" [size]="6" [min]="0" [max]="106200.000"                         [(ngModel)]="myData.manualInflow"     placeholder="Inflow (AF)" [inputStyle]="{background:myData.manualInflowColor,'text-align': 'right'}"> </p-inputNumber></td>
                            <td width="5px" class="text-center p-inputtext-sm">{{myData.inflow.toFixed(2)}}</td>
                            <td width="5px"  class="text-center"><p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm" (onBlur)="adjustManualInput(editMonthlyData,myData.index, false)"                   inputId="manualOutflow_{{myData.index}}"    mode="decimal" [maxFractionDigits]="3" [size]="6" [min]="0" [max]="106200.000"                         [(ngModel)]="myData.manualOutflow"    placeholder="Outflow (AF)" [inputStyle]="{background:myData.manualOutflowColor,'text-align': 'right'}"> </p-inputNumber></td>
                            <td width="5px" class="text-center p-inputtext-sm">{{myData.outflow.toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm">{{myData.avgInflowCFS.toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm">{{myData.avgOutflowCFS.toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm">{{elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days).toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm" *ngIf="!myData.manualOutflow"></td>
                            <td width="5px" class="text-center p-inputtext-sm" *ngIf="myData.manualOutflow" [ngClass]="
                            { 'neutral' :(( (myData.avgOutflowCFS - elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days)) < -0.0000) 
                            &&   ((myData.avgOutflowCFS - elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days))  > -0.0000)),      
                            'outflowincrease' :(myData.avgOutflowCFS - elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days)) < -0.00001,  
                            'outflowdecrease': (myData.avgOutflowCFS - elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days)) >= 0.00001}">{{(myData.avgOutflowCFS - elevationService.getAvgCubicFeetPerSecond(myData.manualOutflow, myData.days)).toFixed(2)}}</td>
                            
                            <td width="5px" class="text-center p-inputtext-sm"  [ngStyle]="{'background':myData.elevationWarning}" >{{ myData.eomContent.toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm">{{myData.eomElevation.toFixed(2)}}</td>
                            <td width="5px" class="text-center p-inputtext-sm"  [ngClass]="
                            { 'neutral' :(( myData.elevationChange < -0.0000) 
                            &&   (myData.elevationChange  > -0.0000) ),      
                            'outflowincrease' :( myData.elevationChange ) < -0.00001,  
                            'outflowdecrease': ( myData.elevationChange ) >= 0.00001}" >{{ myData.elevationChange.toFixed(2)}}</td>
                        </tr>
                    </ng-template>
            </p-table>
        
            <div class="flex column  w-full">
    
                <div class="flex column w-11">
                    <div class="flex justify-content-start ">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300)"
                            (click)="closeEditDialog()"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Close</div>
                        </button>
                    </div>
                </div>
                <div class="flex column w-1">
                    <div class="flex align-content-end right-100">
                        <button
                            pButton
                            type="button"
                            [disabled]="!incorporateChange"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="incorporateMonthlyData(editMonthlyData)"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Incorporate Changes</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    <div class="card flex justify-content-center">
        <p-sidebar [(visible)]="operationsHelpSidebarVisible">
            <h3>Operations</h3>
            <p>
                ToDo Operations Help.
            </p>
        </p-sidebar>
    </div>

    <div class="card flex justify-content-center">
        <p-sidebar [(visible)]="editHelpSidebarVisible">
            <h3>Edit Data</h3>
            <p>
                ToDo Edit Data Help.
            </p>
        </p-sidebar>
    </div>

    <div class="card flex justify-content-center">
        <p-sidebar [(visible)]="loadDataHelpSidebarVisible">
            <h3>Load Data</h3>
            <p>
                ToDo Load Data Help.
            </p>
        </p-sidebar>
    </div>

    <div class="card flex justify-content-center">
        <p-sidebar [(visible)]="fileImportHelpSidebarVisible">
            <h3>Import Saved Report</h3>
            <p>
                ToDo Import Saved Report Help.
            </p>
        </p-sidebar>
    </div>

    <div class="card flex justify-content-center">
        <p-sidebar [(visible)]="saveDataHelpSidebarVisible">
            <h3>Save Report</h3>
            <p>
                ToDo Save Report Help.
            </p>
        </p-sidebar>
    </div>

    <p-dialog header="Operations Data" [(visible)]="dataDialogVisible" [style]="{width: '26vw'}" [modal]="false" [draggable]="false" [resizable]="false">

        <textarea rows="30" cols="75" pInputTextarea [(ngModel)]="proposedOperations"></textarea>
        <!-- <p-divider></p-divider> -->
        
        <div class="flex column  w-full">

            <div class="flex column w-8">
                <div class="flex justify-content-start ">
                    <button
                        pButton
                        [disabled]="proposedOperations.length === 0"
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300);"
                        (click)="clearData($event)"
                    >
                        <div class="flex ml-2 text-blue-500 font-bold">Clear</div>
                    </button>

                    <button
                        pButton
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300);"
                        (click)="loadDataHelpSidebarVisible=true"
                    >
                        <div class="flex ml-2 text-blue-500 font-bold">Help</div>
                    </button>
                </div>
            </div>
            <div class="flex column w-4">
                <div class="flex align-content-end right-100">
                    <button
                        pButton
                        type="button"
                        [disabled]="proposedOperations.length === 0"
                        class="p-button-text text-sm color: var(--blue-300);"
                        (click)="processData($event)"
                    >
                        <div class="flex ml-2 text-blue-500 font-bold">Load Proposed Operations</div>
                    </button>
                </div>
            </div>
        </div>

    </p-dialog>

    <p-dialog header="{{myReport.reportHeader}}" [(visible)]="elevationVisible" [style]="{width: '80vw', height: '40vw'}">

        <p-chart type="line" [data]="elevationGridData" [options]="elevationGridOptions" height="100%" width="100%"></p-chart>

    </p-dialog>


    <p-dialog header="Clear Operational Data" [(visible)]="clearOperationDataVisible" [style]="{width: '20vw', height: '10vw'}"  [modal]="true" [draggable]="false" [resizable]="false">
       
        <!-- <div class="card gap-2"> -->

            <div class="flex column  w-full">
    
                <div class="flex column w-9">
                    <div class="flex justify-content-start ">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="closeClearOperationalDataDialog()"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Close</div>
                        </button>
                    </div>
                </div>
                <div class="flex column w-3">
                    <div class="flex align-content-end mr-10">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="clearOperationalData()"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Clear Data</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- <p-button  [style]="{'float':'left'}" (click)="clearOperationalData()" label="Clear Data"></p-button>
            <p-button  [style]="{'float':'right'}" (click)="closeClearOperationalDataDialog()" label="Cancel"></p-button> -->
        <!-- </div> -->
    </p-dialog>

    <p-dialog header="Calendar" class="flex-shrink-0 flex" [(visible)]="calendarVisible" [style]="{width: '24vw', height: '22vw'}">
        <div class="flex-shrink-0 align-items-center justify-content-center">
            <p-calendar class=" flex-shrink-0 flex align-items-center justify-content-center" [(ngModel)]="myDate"  [inline]="true" [showWeek]="true"></p-calendar>
        </div>

    </p-dialog>

    <p-dialog header="Links" [(visible)]="linksVisible" [style]="{width: '100vw', height: '23vw'}">

        <p-table [scrollable]="true" scrollHeight="800px" [value]="myLinks" [tableStyle]="{ 'min-width': '60rem' }" [autoLayout]="true">
            <ng-template pTemplate="header">
                <tr padding="3px">
                    <th width="15px" class="text-left">Link</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-myLink>
                <tr padding="3px">
                    <td><a href="{{myLink.link}}" target="_blank">{{myLink.name}}</a></td>
                </tr>
            </ng-template>
        </p-table><div class="flex column  w-full">

            <div class="flex column w-8">
                <div class="flex align-content-start ">

                    <button
                        pButton
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300);"
                        (click)="linksVisible=false"
                    >
                        <div class="flex mt-2 text-blue-500 font-bold">Close</div>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- <p-button  [style]="{'float':'right'}" (click)="linksVisible = false" label="Close"></p-button> -->

    </p-dialog>

    <p-dialog header="Input Errors" [(visible)]="errorInputVisible" [style]="{width: '100vw', height: '23vw'}">

        <p-table [scrollable]="true" scrollHeight="800px" [value]="errors.errors" [tableStyle]="{ 'min-width': '60rem' }" [autoLayout]="true">
            {{errors.fataError}}
            <ng-template pTemplate="header">
                <tr padding="3px">
                    <th width="15px" class="text-center">Line</th>
                    <th width="785px" class="text-left">Error</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-myError>
                <tr padding="3px">
                    <td>{{myError.row}}</td>
                    <td>{{myError.error}}</td>
                </tr>
            </ng-template>
        </p-table>
        
        <p-button  [style]="{'float':'right'}" (click)="closeErrorInputDialog()" label="Close"></p-button>

    </p-dialog>

    <p-dialog class="flex" header="Save Data" [(visible)]="saveDialogVisible" [style]="{width: '23vw', height: '17vw'}">

        <!-- <p-divider></p-divider> -->

        <!-- <div class="flex column  w-full">
            <div class="flex row w-full mt-10 pt-10"> -->
                <div class="p-field">
                    <div class="p-float-label  mt-4">
                        <input pInputText id="filename" [style]="{width: '20vw'}" (keyup)="checkNameCharacter(fileName)"  [(ngModel)]="fileName" />
                        <label for="filename">File Name</label>
                    </div>
                </div>
            <!-- </div> -->
            <div class="mt-4">
                <span>
                    <small id="filename-help">
                        Only Alphanumeric characters and a - (dash) are valid.  Dashes can not be the first or last character of the name.
                    </small>
                </span>
            </div>
            <div class="mt-4">
                <span>
                    <small id="filename-note">
                       The file will be saved in the download Folder, move the file to your specific save folder.
                    </small>
                </span>
            </div>
        <!-- </div> -->

            <p-divider></p-divider>
            <div class="flex column w-full mt-3">
        
                <div class="flex column w-10">
                    <div class="flex justify-content-start ">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="saveDialogVisible = false"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Cancel</div>
                        </button>
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="saveDataHelpSidebarVisible=true"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Help</div>
                        </button>
                    </div>
                </div>
                <div class="flex column w-2">
                    <div class="flex align-content-end mr-10">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="saveOperationalData()"
                        >
                            <div class="flex text-blue-500 font-bold">Save</div>
                        </button>
                    </div>
                </div>
            </div>
    </p-dialog>
    <p-dialog header="Import Saved Report" [(visible)]="importFileDialogVisible" [style]="{width: '23vw', height: '17vw'}">

        <p-fileUpload 
        mode="basic" 
        class="flex mt-2 mr-1"
        chooseLabel="Fetch Saved Report" 
        chooseIcon="pi pi-upload"
        name="demo[]" 
        url="https://www.primefaces.org/cdn/api/upload.php" 
        accept="text/*" 
        [auto]="true" 
        [maxFileSize]="1000000"
        (onUpload)="readOperationalData($event)" />

        <div class="flex column  w-full">

            <div class="flex column w-8">
                <div class="flex align-content-start ">

                    <button
                        pButton
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300);"
                        (click)="fileImportHelpSidebarVisible=true"
                    >
                        <div class="flex mt-2 text-blue-500 font-bold">Help</div>
                    </button>
                </div>
            </div>
        </div>
        <!-- <p-button id="help"         label="Help"              icon="pi pi-briefcase"      [style]="{'float':'right'}"                                   [text]="true" [rounded]="true" severity="info"   [outlined]="true" (click)="fileImportHelpSidebarVisible=true"></p-button> -->

    </p-dialog>
</p-panel>  
    
<p-tabView *ngIf="editDialogVisible && dailyDialogVisible"  [(activeIndex)]="myTabIndex" (onChange)="changeTabMonth($event)">
    <p-tabPanel *ngFor="let tab of myMonths" [header]="tab.month">
        <div class="card gap-2">
            <p-table [scrollable]="true" scrollHeight="600px" [styleClass]="selectedSize" [value]="reportTotals" [tableStyle]="{ 'min-width': '120rem', 'max-width': '200rem' }" [autoLayout]="true">
                <ng-template pTemplate="header">
                    <tr padding="3px">
                        <th width="15px" class="text-center">Month-c</th>
                        <th width="5px"  class="text-center">Days</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per Day)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per hour)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per second)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per Day)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per hour)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per second)</th>
                        <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                        <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th> 
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-myMonth >  
                    <tr padding="3px">   
                        <td width="15px" class="text-center p-inputtext-sm">{{ myMonth.month + ' ' +  myMonth.dateRange }}</td>  
                        <td width="5px"  class="text-center p-inputtext-sm"  >{{ myMonth.days}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm" [ngClass]="
                        { 'neutral' :( getAbsValue( (myMonth.inflow) - (myMonth.originaInflow )) <= 0.00001),
                        'valuechanged' :(( getAbsValue( (myMonth.inflow) - (myMonth.originaInflow )) > 0.00001) || myMonth.manualInflow) }">{{myMonth.inflow}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days/24).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days/24/60/60).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm" [ngClass]="
                        { 'neutral' :( getAbsValue( (myMonth.outflow) - (myMonth.originalOutflow )) <= 0.00001),
                        'valuechanged' :(( getAbsValue( (myMonth.outflow) - (myMonth.originalOutflow )) > 0.00001) || myMonth.manualOutflow) }">{{myMonth.outflow.toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.outflow/myMonth.days).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.outflow/myMonth.days/24).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.outflow/myMonth.days/24/60/60).toFixed(5)}}</td>  <!--'background':myMonth.elevationWarning,  -->
                        <td width="5px"  class="text-center p-inputtext-sm" [ngClass]="
                        { 'neutral' :( getAbsValue( (myMonth.eomContent) - (myMonth.originalEomContent )) <= 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.eomContent) - (myMonth.originalEomContent )) > 0.00001)}">{{myMonth.eomContent.toFixed(2)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm" [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.eomContent) - (myMonth.originalEomContent )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.eomContent) - (myMonth.originalEomContent )) > 0.00001)}" >{{myMonth.eomElevation.toFixed(2)}}</td>
                    </tr>
                </ng-template>
            </p-table>
            <p-table [scrollable]="true" *ngIf="!unDockMonths" scrollHeight="300px" [styleClass]="selectedSize" [value]="editDailyData" [tableStyle]="{ 'min-width': '120rem', 'max-width': '200rem' }" [autoLayout]="true">
                <ng-template pTemplate="header">
                    <tr padding="3px">
                        <th width="15px" class="text-center">Day</th>
                        <th width="5px"  class="text-center">Average<br>Inflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Inflow<br>Acre Feet<br>Per Day</th>
                        <th width="5px"  class="text-center">Average<br>Outflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Per Day</th>
                        <th width="5px"  class="text-center">Manual<br>Outflow<br>(CFS)</th>
                        <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Per Day</th>
                        <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Daily Change</th>
                        <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                        <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-myDay >  
                    <tr padding="3px">   
                        <td width="15px" class="text-center p-inputtext-sm">{{ myDay.day }}</td>

                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="  
                        { 'nuetral' :  ( getAbsValue( (myDay.avgInflowCFS  - myDay.manualInflowCFS ) ) < 0.00001),
                        'valuetextchanged' :  ( getAbsValue( (myDay.avgInflowCFS  - myDay.manualInflowCFS ) ) >= 0.00001)}">{{  myDay.manualInflowCFS.toFixed(5)  }}</td> 

                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="  
                        { 'nuetral' :  ( getAbsValue( (myDay.avgInflowCFS  - myDay.manualInflowCFS ) ) < 0.00001),
                        'valuetextchanged' :  ( getAbsValue( (myDay.avgInflowCFS  - myDay.manualInflowCFS ) ) >= 0.00001)}">{{  elevationService.getAcreFeetFromCFS(myDay.avgInflowCFS).toFixed(5)  }}</td>

                        <td width="5px"  class="text-center p-inputtext-sm">{{myDay.avgOutflowCFS.toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS).toFixed(5)}}</td>
                        
                        <td width="5px" *ngIf="myDay.day != 'Totals' "  class="text-center"><p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm"
                            (onBlur)="recalculateDaily(editDailyData,(myDay.index))"  [disabled]="myDay.disabled"               inputId="manualOutflow_{{myDay.index}}"   
                                [size]="6" [min]="0" [max]="1500"  mode="decimal" [maxFractionDigits]="3"                     [(ngModel)]="myDay.manualOutflowCFS"   
                                placeholder="Outflow (CFS)" [inputStyle]="{background:myDay.manualOutflowColor,'text-align': 'right'}"> </p-inputNumber></td>

                        <td width="5px"  *ngIf="myDay.day == 'Totals' " class="text-center p-inputtext-sm">{{myDay.manualOutflowCFS.toFixed(5)}}</td>

                        <td width="5px"  class="text-center p-inputtext-sm">{{elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS).toFixed(5)}}</td>
                        
                        <td width="5px"  [ngClass]="
                            { 'neutral' :(( (elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS )) < -0.0000) 
                            &&   ((elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS ))  > -0.0000)),      
                            'outflowdecrease' :( elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS )) < -0.00001,  
                            'outflowincrease': ( elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS)) >= 0.00001}" 
                            class="text-center p-inputtext-sm">{{( elevationService.getAcreFeetFromCFS( (myDay.manualOutflowCFS - myDay.avgOutflowCFS) ).toFixed(4) )}}</td>

                        <td width="5px"  class="text-center p-inputtext-sm">{{myDay.eomContent.toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngStyle]="{'background':myDay.elevationWarning}" >{{myDay.eomElevation.toFixed(5)}}</td>
                    </tr>
                </ng-template>
            </p-table>

            <p-table [scrollable]="false" scrollHeight="600px" [styleClass]="selectedSize" [value]="modifiedReportTotals" [tableStyle]="{ 'min-width': '120rem', 'max-width': '200rem' }" [autoLayout]="true">
                <ng-template pTemplate="header">
                    <tr padding="3px">
                        <th width="15px" class="text-center">Month-d</th>
                        <th width="5px"  class="text-center">Days</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per Day)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per hour)</th>
                        <th width="5px"  class="text-center">Predicted<br>Inflow<br>(AF per second)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per Day)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per hour)</th>
                        <th width="5px"  class="text-center">Outflow<br>(AF per second)</th>
                        <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                        <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-myMonth >  
                    <tr padding="3px">   
                        <td width="15px" class="text-center p-inputtext-sm">{{ myMonth.month + ' ' +  myMonth.dateRange }}</td>  
                        <td width="5px"  class="text-center p-inputtext-sm"  >{{ myMonth.days}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{myMonth.inflow.toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days/24).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm">{{(myMonth.inflow/myMonth.days/24/60/60).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}">{{myMonth.outflow.toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}">{{(myMonth.outflow/myMonth.days).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}">{{(myMonth.outflow/myMonth.days/24).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}">{{(myMonth.outflow/myMonth.days/24/60/60).toFixed(5)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}">{{myMonth.eomContent.toFixed(2)}}</td>
                        <td width="5px"  class="text-center p-inputtext-sm"  [ngStyle]="{'background':myMonth.elevationWarning} "  [ngClass]="
                        { 'background':myMonth.elevationWarning, 'neutral' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) < 0.00001),
                        'valuechanged' :( getAbsValue( (myMonth.originalOutflow) - (myMonth.outflow )) > 0.00001)}" >{{myMonth.eomElevation.toFixed(2)}}</td>
                    </tr>
                </ng-template>
            </p-table>
            
        <!-- <p-divider class="flex w-full"></p-divider> -->

            <div class="flex column  w-full">

                <div class="flex column w-11">
                    <div class="flex justify-content-start ">
                        <button
                            pButton
                            type="button"
                            class="p-button-text text-sm color: var(--blue-500)"
                            (click)="closeDaily()"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Close</div>
                        </button>

                        <button
                            pButton
                            type="button"
                            [disabled]="!rollupChange"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="resetDaily(editDailyData)"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Reset</div>
                        </button>
                    </div>
                </div>
                <div class="flex column w-1">
                    <div class="flex align-content-end right-100">
                        
                        <p-button id="percent" icon="pi pi-hammer"                [style]="{'float':'right'}" [text]="true" [rounded]="true" severity="info" [outlined]="true" (click)="biMonthlyCFS = !biMonthlyCFS"></p-button>
                        <p-button id="dpck"    icon="pi pi-arrow-circle-up"     [style]="{'float':'right'}" [text]="true" [rounded]="true" severity="info" [outlined]="true" (click)="unDockMonths = !unDockMonths"></p-button>

                        <button
                            pButton
                            type="button"
                            [disabled]="!rollupChange"
                            class="p-button-text text-sm color: var(--blue-300);"
                            (click)="rollupDaily(editDailyData)"
                        >
                            <div class="flex ml-2 text-blue-500 font-bold">Roll up Changes</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </p-tabPanel>
</p-tabView>



<p-dialog [header]="selectedMonth.month" [(visible)]="unDockMonths" [style]="{width: '130vw', height: '60vw'}">
    <p-table  scrollHeight="95%" [styleClass]="selectedSize" [value]="editDailyData" [tableStyle]="{ 'min-width': '100rem', 'max-width': '300rem' }" [autoLayout]="false">
        <ng-template pTemplate="header">
            <tr padding="3px">
                <th width="15px" class="text-center">Day</th>
                <th width="5px"  class="text-center">Average<br>Inflow<br>(CFS)</th>
                <th width="5px"  class="text-center">Inflow<br>Acre Feet<br>Per Day</th>
                <th width="5px"  class="text-center">Average<br>Outflow<br>(CFS)</th>
                <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Per Day</th>
                <th width="5px"  class="text-center">Manual<br>Outflow<br>(CFS)</th>
                <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Per Day</th>
                <th width="5px"  class="text-center">Outflow<br>Acre Feet<br>Daily Change</th>
                <th width="5px"  class="text-center">EOM<br>Content<br>(AF)</th>
                <th width="5px"  class="text-center">EOM<br>Elevation<br>(FT)</th>
                <th width="1px"  class="text-center"><p-button id="percent" icon="pi pi-hammer"                [style]="{'float':'right'}" [text]="true" [rounded]="true" severity="info" [outlined]="true" (click)="biMonthlyCFS = !biMonthlyCFS"></p-button></th>
                <th width="1px"  class="text-center"><p-button id="dock"    icon="pi pi-arrow-circle-down"     [style]="{'float':'right'}" [text]="true" [rounded]="true" severity="info" [outlined]="true" (click)="unDockMonths = !unDockMonths"></p-button></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-myDay >  
            <tr padding="3px">   
                <td width="15px" class="text-center p-inputtext-sm">{{ myDay.day }}</td>  
                <td width="5px"  class="text-center p-inputtext-sm" [ngStyle]="{'background':myDay.manualInflowColor}" >{{ myDay.avgInflowCFS.toFixed(5)}}</td> <!-- not sure what the background change is here -->
                <td width="5px"  class="text-center p-inputtext-sm">{{elevationService.getAcreFeetFromCFS(myDay.avgInflowCFS).toFixed(5)}}</td>
                <td width="5px"  class="text-center p-inputtext-sm">{{myDay.avgOutflowCFS.toFixed(5)}}</td>
                <td width="5px"  class="text-center p-inputtext-sm">{{elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS).toFixed(5)}}</td>
                <td width="5px"  class="text-center"><p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm" 
                    (onBlur)="recalculateDaily(editDailyData,myDay.index)"  [disabled]="myDay.disabled"               inputId="manualOutflow_{{myDay.index}}"   
                        [size]="6" [min]="0" [max]="1500"  mode="decimal" [maxFractionDigits]="3"                     [(ngModel)]="myDay.manualOutflowCFS"   
                        placeholder="Outflow (CFS)" [inputStyle]="{background:myDay.manualOutflowColor,'text-align': 'right'}"> </p-inputNumber></td>
                <td width="5px"  class="text-center p-inputtext-sm">{{elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS).toFixed(5)}}</td>
                <td width="5px"  [ngClass]="
                    { 'neutral' :(( (elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS )) < -0.0000) 
                    &&   ((elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS ))  > -0.0000)),      
                    'outflowdecrease' :( elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS )) < -0.00001,  
                    'outflowincrease': ( elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS)) >= 0.00001}" 
                    class="text-center p-inputtext-sm">{{( elevationService.getAcreFeetFromCFS(myDay.manualOutflowCFS) - elevationService.getAcreFeetFromCFS(myDay.avgOutflowCFS )).toFixed(5)}}</td>
                <td width="5px"  class="text-center p-inputtext-sm">{{myDay.eomContent.toFixed(5)}}</td>
                <td width="5px"  class="text-center p-inputtext-sm"  [ngStyle]="{'background':myDay.elevationWarning}" >{{myDay.eomElevation.toFixed(5)}}</td>
            </tr>
        </ng-template>
    </p-table>
</p-dialog>

<div class="flex flex-shrink-0 ">
<p-dialog class="flex flex-shrink-0 "  header="Bi-Monthly - {{selectedMonth.month}}" [(visible)]="biMonthlyCFS" [style]="{width: '675px', height: '500px'}">  <!-- [style]="{width: '37vw', height: '27vw'}" -->

    <!-- add bi monthly inputs here -->
    <div class="flex flex-shrink-0 ">
        <div class="card flex justify-content-center border-200 border-1 p-1 border-round">
            <!-- <div class="flex flex-wrap gap-3"> -->

                <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">
                    <div class="flex align-items-center">
                        <p-radioButton 
                            class="pl-2"
                            name="outflowPercent" 
                            value="Both" 
                            [(ngModel)]="outflowDailyCFS" 
                            inputId="outflowDailyCFS1"
                            (onClick)="onPercentageLiveChangeCFS(editDailyData)"/>
                        <label for="outflowPercent1" class="font-bold ml-1">
                            {{selectedMonth.month}}
                        </label>
                        
                        <p-radioButton 
                            class="pl-2"
                            name="outflowPercent" 
                            value="FirstHalf" 
                            [(ngModel)]="outflowDailyCFS" 
                            inputId="outflowDailyCFS2"
                            (onClick)="onPercentageLiveChangeCFS(editDailyData)"/>
                        <label for="outflowPercent1" class="font-bold ml-1">
                            {{liveChange[0].half }}
                        </label>
                        
                        <p-radioButton 
                            class="pl-2"
                            name="outflowPercent" 
                            value="SecondHalf" 
                            [(ngModel)]="outflowDailyCFS" 
                            inputId="outflowDailyCFS3"
                            (onClick)="onPercentageLiveChangeCFS(editDailyData)"/>
                        <label for="outflowPercent2" class="font-bold ml-1">
                            {{liveChange[1].half}}
                        </label>
                    </div>
                </div>

                <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">

                    <div class="flex align-items-center">
                        <p-radioButton 
                            class="pl-2"
                            name="outflowPercent" 
                            value="Decrease" 
                            [(ngModel)]="outflowDirectionCFS" 
                            inputId="outflowPercent1"
                            (onClick)="onPercentageLiveChangeCFS(editDailyData)"/>
                        <label for="outflowPercent1" class="font-bold ml-1">
                            Decrease outflow
                        </label>
                        
                        <p-radioButton 
                            class="pl-2"
                            name="outflowPercent" 
                            value="Increase" 
                            [(ngModel)]="outflowDirectionCFS" 
                            inputId="outflowPercent2"
                            (onClick)="onPercentageLiveChangeCFS(editDailyData)"/>
                        <label for="outflowPercent2" class="font-bold ml-1">
                            Increase outflow
                        </label>
                    </div>
                </div>
                
                <!-- <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">

                    <div class = "flex">
                        <p-checkbox [(ngModel)]="overRideCheckedCFS" [binary]="true"   label="Override changed CFS" inputId="binary" />
                        <div class=" text-left   p-3 m-1 font-light">
                            Note: If checked, the values of the manual changed values will be over written.
                        </div>
                    </div>
                    
                </div> -->
                
                <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">

                    <div class = "flex">
                        <div class=" text-left   p-3 m-1 font-light">
                            Note: The Percentage changed is based on the original / incorporated outflow Avg CFS.  All prior manual inputs will be changed.
                        </div>
                    </div>
                    
                </div>
                
                <!-- <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">
                    
                    <p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm mb-3 w-0 font-bold" [maxFractionDigits]="4"  inputId="outflowPercentage" (onBlur)="onPercentageLiveChangeCFS(editDailyData)"  mode="decimal" [size]="4" [min]="0" [max]="100"  [(ngModel)]="outflowPercentageCFS" placeholder="Outflow %" suffix=" %"> </p-inputNumber>
                    <p-slider [(ngModel)]="outflowPercentageCFS" class="mb-3 w-0" (onChange)="onPercentageLiveChangeCFS(editDailyData)" styleClass="w-30rem" />
                
                </div> -->

                <div class="grid">
                    <div class="col-fixed" style="width:100px">
                        <div class="text-center p-3 border-round-sm">
                            <p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm mb-3 w-0 font-bold" [maxFractionDigits]="4"  inputId="outflowPercentage" (onBlur)="onPercentageLiveChangeCFS(editDailyData)"  mode="decimal" [size]="4" [min]="0" [max]="100"  [(ngModel)]="outflowPercentageCFS" placeholder="Outflow %" suffix=" %"> </p-inputNumber>
                        </div>
                    </div>
                    <div class="col-10 align-items-center">
                        <div class="text-center p-3 border-round-sm mt-3">
                            <p-slider [(ngModel)]="outflowPercentageCFS" class="mb-3 w-0 " (onChange)="onPercentageLiveChangeCFS(editDailyData)" styleClass="100%" />
                        </div>
                    </div>
                </div>
                
                <!-- <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">
                    
                    <p-inputNumber [inputStyle]="{'text-align': 'right'}" class="p-inputtext-sm mb-3 w-0 font-bold" [maxFractionDigits]="4"  inputId="outflowPercentage" (onBlur)="onPercentageLiveChangeCFS(editDailyData)"  mode="decimal" [size]="4" [min]="0" [max]="100"  [(ngModel)]="outflowPercentageCFS" placeholder="Outflow %" suffix=" %"> </p-inputNumber>
                    <p-slider [(ngModel)]="outflowPercentageCFS" class="mb-3 w-0" (onChange)="onPercentageLiveChangeCFS(editDailyData)" styleClass="w-30rem" />
                
                </div> -->
                
                <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">

                    <p-table [scrollable]="true" scrollHeight="100px" [styleClass]="selectedSize" [value]="liveChange" [tableStyle]="{ 'min-width': '20rem' }" [autoLayout]="true">
                        <ng-template pTemplate="header">
                            <tr padding="3px">
                                <th width="5px"  class="text-center">Month</th>
                                <th width="5px"  class="text-center">Days</th>
                                <th width="5px"  class="text-center">Original Avg CFS</th>
                                <th width="5px"  class="text-center">New Avg CFS</th>
                                <th width="5px"  class="text-center">Monthly</th>
                        
                            </tr>
                        </ng-template>
                        
                        <ng-template pTemplate="body" let-myChange >

                            <tr padding="3px">
                                <th width="5px"  class="text-center">{{myChange.half}}</th>
                                <td width="5px"  class="text-center" >{{myChange.days}}</td>
                                <td width="5px"  class="text-center" >{{myChange.avgOutflowCFS.toFixed(4)}}</td>
                                <td width="5px"  class="text-center" >{{myChange.changed.toFixed(4)}}</td>
                                <td width="5px"  class="text-center" >{{myChange.biMonthly.toFixed(4)}}</td>
                            </tr>
                        </ng-template>

                    </p-table>
                    
                </div>
                
                <!-- <div class="flex-initial text-left   p-3 m-1 border-round-sm font-bold">
                    <button
                        pButton
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300)"
                        (click)="onPercentageChangeCFS(editDailyData)"
                    >
                        <div class="flex ml-2 text-blue-500 font-bold">Update</div>
                    </button>
                    
                </div> -->

                <div class="flex column  w-full">
        
                    <div class="flex column w-11">
                        <div class="flex justify-content-start ">
                            <button
                                pButton
                                type="button"
                                class="p-button-text text-sm color: var(--blue-300);"
                                (click)="biMonthlyCFS=false"
                            >
                                <div class="flex ml-2 text-blue-500 font-bold">Close</div>
                            </button>
                        </div>
                    </div>
                    <div class="flex column w-1 mr-3 ">
                        <div class="flex align-content-end mr-1">
                    <!-- <button
                        pButton
                        type="button"
                        class="p-button-text text-sm color: var(--blue-300)"
                        (click)="onPercentageSetOriginalCFS(editDailyData)"
                    >
                        <div class="flex ml-2 text-blue-500 font-bold">Set to Original</div>
                    </button> -->
                    <button
                        pButton
                        type="button"
                        class="flex align-content-end p-button-text text-sm color: var(--blue-300)"
                        (click)="onPercentageChangeCFS(editDailyData)"
                    >
                        <div class="flex align-content-end ml-2 text-blue-500 font-bold">Update</div>
                    </button>
                        </div>
                    </div>
                </div>

            <!-- </div> -->
        </div>
    </div>

</p-dialog>
</div>

<p-toast [life]="6000" position="top-center" key="message"></p-toast>

